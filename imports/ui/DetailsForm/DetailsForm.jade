template(name="DetailsForm")
	.navigation-wrapper
		nav.navbar.navbar-fixed-top
			a.navbar-back(href="{{getBackLink}}")
				i.fa.fa-angle-left.m-r-xs
				| {{_ 'navigation.back'}}
			.navbar-title {{getTitle}}

	form.form-horizontal
		if isLoading
			.loading
				i.fa.fa-circle-o-notch.fa-spin.fa-3x
		else if noResult
			.center-align
				h2 Oops!
				p We couldn't find anything.
				button#back.btn.btn-primary {{_ 'navigation.back'}}
		else
			each section in sections
				.section
					if section.header
						.section-header {{getTranslation section.header}}
					.section-content
						each content in section.contents
							if isArray content
								.array(key='{{element.key}}')
									each entity in getValue content
										if isArray content.type.[0]
											tr.array-item(entityKey='{{content.type.[0].key}}Id' entityId='{{entity._id}}' entityLink='{{content.type.[0].link}}')
												th.left
												td.item
													each field in content.type.[0].type
														tr.field
															th.key {{getEntityTranslation content.type.[0].key field.key}}:
															th.middle
															td.value
																if isTel field
																	if getProperty entity field
																		a(href='tel:{{getProperty entity field}}')
																			| {{getProperty entity field}}
																	else
																		| -
																else if isEmail field
																	if getProperty entity field
																		a(href='mailto:{{getProperty entity field}}')
																			| {{getProperty entity field}}
																	else
																		| -
																else if getProperty entity field
																	| {{getProperty entity field}}
																else
																	| -
												td.link(rowspan='{{content.type.[0].type.count}}')
													i.fa.fa-angle-right
										else if isDropdown content.type.[0]
											.input.form-group(key='{{getLinkedKey content.type.[0]}}')
												.key {{getProperty entity content.type.[0]}}
												.value
													i.fa.fa-trash.icon
									else
										p.noElements {{getEntityTranslation content.type.[0].key 'noElements'}}
							else if content.readonly
								.form-group
									.key {{getEntityTranslation content.key}}
									.value {{getValue content}}
							else
								.input.form-group(key='{{getLinkedKey content}}')
									.key {{getEntityTranslation content.key}}
									.value
										| {{getValue content}}
										i.fa.fa-angle-right.icon

					each action in section.actions
						if isButton action
							.m-sm
								a.btn.btn-primary.btn-block.p-xs(href='{{getActionPath action}}') {{getEntityTranslation action.key}}
